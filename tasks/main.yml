---
- name: Creating project_root directory
  file:
    path: /var/www
    state: directory
    mode: 0755

- name: Copy all node data
  command: cp -r /tmp/nodeapp/ /var/www

- name: Install packages based on package.json.
  npm:
    path: /var/www/nodeapp
    registry: "http://registry.npmjs.org/"

- name: Install "n" node.js package globally.
  npm:
    name: n
    global: yes

- name: install node
  command: n '6.9.1' -q

- file:
    src: '/usr/local/n/versions/node/6.9.1/bin/node'
    dest: '/usr/bin/node'
    state: link
    force: yes
